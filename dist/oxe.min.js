/*
	Name: Oxe
	Version: 3.6.3
	License: MPL-2.0
	Author: Alexander Elias
	Email: alex.steven.elias@gmail.com
	This Source Code Form is subject to the terms of the Mozilla Public
	License, v. 2.0. If a copy of the MPL was not distributed with this
	file, You can obtain one at http://mozilla.org/MPL/2.0/.
*/
var _createClass=function(){function e(e,t){for(var a,n=0;n<t.length;n++)a=t[n],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(function(e,t){"object"===("undefined"==typeof exports?"undefined":_typeof(exports))&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Oxe",t):e.Oxe=t()})(this,function(){"use strict";var e=function(){function e(t){_classCallCheck(this,e),this.data={},this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){if(e=e||{},e.components){var t,a=!0,n=!1;try{for(var r,o,l=e.components[Symbol.iterator]();!(a=(r=l.next()).done);a=!0)o=r.value,this.define(o)}catch(e){n=!0,t=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw t}}}}},{key:"renderSlot",value:function(e,t){var a,n=e.querySelectorAll("slot[name]"),r=!0,o=!1;try{for(var l,i=n[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value,d=s.getAttribute("name"),u=t.querySelector("[slot=\""+d+"\"]");u?s.parentNode.replaceChild(u,s):s.parentNode.removeChild(s)}}catch(e){o=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}var c=e.querySelector("slot:not([name])");if(c&&t.children.length)for(;t.firstChild;)c.parentNode.insertBefore(t.firstChild,c);c&&c.parentNode.removeChild(c)}},{key:"renderTemplate",value:function(e){var t=document.createDocumentFragment();if(e)if("string"==typeof e){var a=document.createElement("div");for(a.innerHTML=e;a.firstChild;)t.appendChild(a.firstChild)}else t.appendChild(e);return t}},{key:"renderStyle",value:function(e,t){if(e){if(window.CSS&&window.CSS.supports){if(!window.CSS.supports("(--t: black)")){var a,n=e.match(/--\w+(?:-+\w+)*:\s*.*?;/g),r=!0,o=!1;try{for(var l,i=n[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value,d=s.match(/(--\w+(?:-+\w+)*):\s*(.*?);/),u=new RegExp("var\\("+d[1]+"\\)","g");e=e.replace(d[0],""),e=e.replace(u,d[2])}}catch(e){o=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(o)throw a}}}window.CSS.supports(":scope")||(e=e.replace(/\:scope/g,"[o-scope=\""+t+"\"]")),window.CSS.supports(":host")||(e=e.replace(/\:host/g,"[o-scope=\""+t+"\"]"))}var c=document.createElement("style"),p=document.createTextNode(e);return c.appendChild(p),c}}},{key:"created",value:function(e,t){var a=this,n=t.name+"-"+t.count++;if(Object.defineProperties(e,{scope:{enumerable:!0,value:n},status:{enumerable:!0,value:"created"}}),e.setAttribute("o-scope",n),f.model.set(n,t.model||{}),f.methods.data[n]=t.methods,a.compiled&&e.parentNode&&"O-ROUTER"===e.parentNode.nodeName)f.view.add(e),t.created&&t.created.call(e);else{var r=a.renderTemplate(t.template),o=a.renderStyle(t.style,n);o&&r.insertBefore(o,r.firstChild),t.shadow&&"attachShadow"in document.body?e.attachShadow({mode:"open"}).appendChild(r):t.shadow&&"createShadowRoot"in document.body?e.createShadowRoot().appendChild(r):(a.renderSlot(r,e),e.appendChild(r)),f.binder.bind(e),t.created&&t.created.call(e)}}},{key:"attached",value:function(e,t){t.attached&&t.attached.call(e)}},{key:"detached",value:function(e,t){t.detached&&t.detached.call(e)}},{key:"define",value:function(e){var t=this;if(!e.name)throw new Error("Oxe.component.define - requires name");if(e.name in t.data)throw new Error("Oxe.component.define - component defined");return t.data[e.name]=e,e.count=0,e.compiled=!1,e.model=e.model||{},e.shadow=e.shadow||!1,e.template=e.template||"",e.properties=e.properties||{},e.properties.status={enumerable:!0,configurable:!0,value:"define"},e.properties.model={enumerable:!0,configurable:!0,get:function(){return f.model.get(this.scope)},set:function(e){return e=e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?e:{},f.model.set(this.scope,e)}},e.properties.methods={enumerable:!0,get:function(){return f.methods.data[this.scope]}},e.proto=Object.create(HTMLElement.prototype,e.properties),e.proto.attributeChangedCallback=e.attributed,e.proto.createdCallback=function(){t.created(this,e)},e.proto.attachedCallback=function(){t.attached(this,e)},e.proto.detachedCallback=function(){t.detached(this,e)},document.registerElement(e.name,{prototype:e.proto})}}]),e}(),t={extension:function(e){var t=e.lastIndexOf(".");return 0<t?e.slice(t+1):""},join:function(){return Array.prototype.join.call(arguments,"/").replace(/\/{2,}/g,"/").replace(/^(https?:\/)/,"$1/")},base:function(e){var t=window.document.querySelector("base");return e&&(t?t.href=e:(t=window.document.createElement("base"),t.href=e,window.document.head.insertBefore(t,window.document.head.firstElementChild))),t?t.href:window.location.origin+window.location.pathname},resolve:function(e,t){var a=[];if(e=e.replace(window.location.origin,""),0===e.indexOf("http://")||0===e.indexOf("https://")||0===e.indexOf("//"))return e;"/"!==e.charAt(0)&&(t=t||this.base(),e=t+"/"+e,e=e.replace(window.location.origin,"")),e=e.replace(/\/{2,}/,"/"),e=e.replace(/^\//,""),e=e.replace(/\/$/,"");for(var n=e.split("/"),r=0,o=n.length;r<o;r++)if("."===n[r]||""===n[r])continue;else".."===n[r]?0<r&&a.splice(r-1,1):a.push(n[r]);return"/"+a.join("/")}},a=function(){function e(t){_classCallCheck(this,e),this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},e.base&&t.base(e.base)}}]),e}(),n={PATH:/\s*\|.*/,PREFIX:/(data-)?o-/,ROOT:/^(https?:)?\/?\//,TYPE:/(data-)?o-|-.*$/g,SPLIT_MODIFIERS:/\s|\s?,\s?/,binderNormalize:function(e){return e?e.replace(/\s+$/,"").replace(/^\s+/,"").replace(/\.{2,}/g,".").replace(/\|{2,}/g,"|").replace(/\,{2,}/g,",").replace(/\s{2,}/g," ").replace(/\s?\|\s?/,"|"):""},binderName:function(e){return e.replace(this.PREFIX,"")},binderType:function(e){return e.replace(this.TYPE,"")},binderNames:function(e){return e.replace(this.PREFIX,"").split("-")},binderValues:function(e){e=this.binderNormalize(e);var t=e.indexOf("|");return-1===t?e.split("."):e.slice(0,t).split(".")},binderModifiers:function(e){e=this.binderNormalize(e);var t=e.indexOf("|");return-1===t?[]:e.slice(t+1).split(this.SPLIT_MODIFIERS)},binderPath:function(e){return this.binderNormalize(e).replace(this.PATH,"")},ensureElement:function(e){e.query=e.query||"",e.scope=e.scope||document.body;var t=e.scope.querySelector(""+e.name+e.query);t||(t=document.createElement(e.name),"afterbegin"===e.position?e.scope.insertBefore(t,e.scope.firstChild):"beforeend"===e.position?e.scope.appendChild(t):e.scope.appendChild(t));var a,n=!0,r=!1;try{for(var o,l,i=e.attributes[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)l=o.value,t.setAttribute(l.name,l.value)}catch(e){r=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}return t},formData:function(e,t){for(var a=e.querySelectorAll("[o-value]"),n={},r=0,o=a.length;r<o;r++){var l=a[r],i=l.getAttribute("o-value");if(i){i=i.replace(/\s*\|.*/,"");var s=i.split(".").slice(-1);n[s]=this.getByPath(t,i)}}return n},walker:function(e,t){for(t(e),e=e.firstChild;e;)this.walker(e,t),e=e.nextSibling},replaceEachVariable:function(e,t,a,n){var r=this;this.walker(e,function(e){if(3===e.nodeType)(e.nodeValue==="$"+t||e.nodeValue==="$index")&&(e.nodeValue=n);else if(1===e.nodeType)for(var r=0,o=e.attributes.length;r<o;r++){var l=e.attributes[r],i=l.name,s=l.value.split(" ")[0].split("|")[0];(0===i.indexOf("o-")||0===i.indexOf("data-o-"))&&(s===t||0===s.indexOf(t))&&(l.value=a+"."+n+l.value.slice(t.length))}})},traverse:function(e,t,a){for(var n,r="string"==typeof t?t.split("."):t,o=r.length-1,l=0;l<o;l++){if(n=r[l],!(n in e))if("function"==typeof a)a(e,n,l,r);else return;e=e[n]}return{data:e,key:r[o]}},setByPath:function(e,t,a){for(var n,r="string"==typeof t?t.split("."):t,o=r.length-1,l=0;l<o;l++)n=r[l],n in e||(isNaN(r[l+1])?e[n]={}:e[n]=[]),e=e[n];return e[r[o]]=a},getByPath:function(e,t){for(var a,n="string"==typeof t?t.split("."):t,r=n.length-1,o=0;o<r;o++){if(a=n[o],!(a in e))return;e=e[a]}return e[n[r]]},joinDot:function(){return Array.prototype.join.call(arguments,".").replace(/\.{2,}/g,".")},ready:function(e){e&&("interactive"!==window.document.readyState&&"complete"!==window.document.readyState?window.document.addEventListener("DOMContentLoaded",function t(){e(),window.document.removeEventListener("DOMContentLoaded",t)},!0):e())}},r=function(){function e(){_classCallCheck(this,e),this.events={}}return _createClass(e,[{key:"on",value:function(e,t){e in this.events||(this.events[e]=[]),this.events[e].push(t)}},{key:"off",value:function(e,t){if(e in this.events){var a=this.events[e].indexOf(t);-1!==a&&this.events[e].splice(a,1)}}},{key:"emit",value:function(e){if(e in this.events)for(var t=this.events[e],a=Array.prototype.slice.call(arguments,1),n=0,r=t.length;n<r;n++)t[n].apply(this,a)}}]),e}(),o=function(e){function t(e){_classCallCheck(this,t);var a=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.reads=[],a.writes=[],a.fps=1e3/60,a.pending=!1,a.setup(e),a}return _inherits(t,e),_createClass(t,[{key:"setup",value:function(e){e=e||{},e.fps=void 0===e.fps||null===e.fps?this.fps:e.fps}},{key:"read",value:function(e,t){var a=t?e.bind(t):e;return this.reads.push(a),this.tick(),a}},{key:"write",value:function(e,t){var a=t?e.bind(t):e;return this.writes.push(a),this.tick(),a}},{key:"tick",value:function(){this.pending||(this.pending=!0,window.requestAnimationFrame(this.flush.bind(this)))}},{key:"flush",value:function(e){var t;try{t=this.runReads(this.reads,e),this.runWrites(this.writes,t)}catch(t){if(this.events.error&&this.events.error.length)this.emit("error",t);else throw t}this.pending=!1,(this.reads.length||this.writes.length)&&this.tick()}},{key:"runWrites",value:function(e,t){for(var a;a=e.shift();)if(a(),t&&e.length===t)return}},{key:"runReads",value:function(e,t){for(var a;a=e.shift();)if(a(),this.fps&&performance.now()-t>this.fps)return e.length}},{key:"remove",value:function(e,t){var a=e.indexOf(t);return!!~a&&!!e.splice(a,1)}},{key:"clear",value:function(e){return this.remove(this.reads,e)||this.remove(this.writes,e)}}]),t}(r),l=function(){function e(t){_classCallCheck(this,e),this.mime={xml:"text/xml; charset=utf-8",html:"text/html; charset=utf-8",text:"text/plain; charset=utf-8",json:"application/json; charset=utf-8",js:"application/javascript; charset=utf-8"},this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this.auth=e.auth||!1,this.method=e.method||"get",this.request=e.request,this.response=e.response,this.acceptType=e.acceptType,this.contentType=e.contentType,this.responseType=e.responseType}},{key:"serialize",value:function(e){var t="";for(var a in e)t=0<t.length?t+"&":t,t=t+encodeURIComponent(a)+"="+encodeURIComponent(e[a]);return t}},{key:"change",value:function(e,t,a){if(4===a.readyState){if(t.opt=e,t.xhr=a,t.statusCode=a.status,t.statusText=a.statusText,t.data=void 0===a.response?void 0===a.responseText?void 0:a.responseText:a.response,"json"===e.responseType&&"string"==typeof t.data)try{t.data=JSON.parse(t.data)}catch(e){console.warn(e)}if((401===a.status||403===a.status)&&t.opt.auth&&f.keeper.response)return f.keeper.response(t);if(this.response&&!1===this.response(t))return;200<=a.status&&300>a.status||304==a.status?e.success?e.success(t):e.handler&&(e.error=!1,e.handler(t)):e.error?e.error(t):e.handler&&(e.error=!0,e.handler(t))}}},{key:"fetch",value:function(e){var t,a={},n=new XMLHttpRequest;if(e=e||{},e.headers={},e.url=e.url?e.url:window.location.href,e.auth=void 0===e.auth||null===e.auth?this.auth:e.auth,e.method=void 0===e.method||null===e.method?this.method:e.method,e.acceptType=void 0===e.acceptType||null===e.acceptType?this.acceptType:e.acceptType,e.contentType=void 0===e.contentType||null===e.contentType?this.contentType:e.contentType,e.responseType=void 0===e.responseType||null===e.responseType?this.responseType:e.responseType,e.method=e.method.toUpperCase(),n.open(e.method,e.url,!0,e.username,e.password),e.contentType)switch(e.contentType){case"js":e.headers["Content-Type"]=this.mime.js;break;case"xml":e.headers["Content-Type"]=this.mime.xml;break;case"html":e.headers["Content-Type"]=this.mime.html;break;case"json":e.headers["Content-Type"]=this.mime.json;break;default:e.headers["Content-Type"]=e.contentType;}if(e.acceptType)switch(e.acceptType){case"js":e.headers.Accept=this.mime.js;break;case"xml":e.headers.Accept=this.mime.xml;break;case"html":e.headers.Accept=this.mime.html;break;case"json":e.headers.Accept=this.mime.json;break;default:e.headers.Accept=e.acceptType;}if(e.responseType)switch(e.responseType){case"text":n.responseType="text";break;case"json":n.responseType="json";break;case"blob":n.responseType="blob";break;case"xml":n.responseType="document";break;case"html":n.responseType="document";break;case"document":n.responseType="document";break;case"arraybuffer":n.responseType="arraybuffer";break;default:n.responseType=e.responseType;}if(e.mimeType&&n.overrideMimeType(e.mimeType),e.withCredentials&&(n.withCredentials=e.withCredentials),e.headers)for(var r in e.headers)n.setRequestHeader(r,e.headers[r]);e.data&&("GET"===e.method?e.url=e.url+"?"+this.serialize(e.data):"json"===e.contentType?t=JSON.stringify(e.data):t=e.data),a.xhr=n,a.opt=e,a.data=e.data,a.opt.auth&&!1===f.keeper.request(a)||this.request&&!1===this.request(a)||(n.onreadystatechange=this.change.bind(this,e,a,n),n.send(t))}},{key:"post",value:function(e){return e.method="post",this.fetch(e)}},{key:"get",value:function(e){return e.method="get",this.fetch(e)}},{key:"put",value:function(e){return e.method="put",this.fetch(e)}},{key:"head",value:function(e){return e.method="head",this.fetch(e)}},{key:"patch",value:function(e){return e.method="patch",this.fetch(e)}},{key:"delete",value:function(e){return e.method="delete",this.fetch(e)}},{key:"options",value:function(e){return e.method="options",this.fetch(e)}},{key:"connect",value:function(e){return e.method="connect",this.fetch(e)}}]),e}(),i=function(e){function a(){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.data=[],e.location={},e.ran=!1,e.auth=!1,e.element=null,e.contain=!1,e.compiled=!1,document.addEventListener("click",e.clickListener.bind(e),!0),window.addEventListener("popstate",e.stateListener.bind(e),!0),e}return _inherits(a,e),_createClass(a,[{key:"setup",value:function(e){e=e||{},this.auth=void 0===e.auth?this.auth:e.auth,this.element=void 0===e.element?this.element:e.element,this.contain=void 0===e.contain?this.contain:e.contain,this.external=void 0===e.external?this.external:e.external,e.routes&&this.add(e.routes),this.route(window.location.href,{replace:!0})}},{key:"scroll",value:function(e,t){window.scroll(e,t)}},{key:"back",value:function(){window.history.back()}},{key:"forward",value:function(){window.history.forward()}},{key:"redirect",value:function(e){window.location.href=e}},{key:"add",value:function(e){if(!e)throw new Error("Oxe.router.add - requires data parameter");else"Object"===e.constructor.name?Array.prototype.push.call(this.data,e):"Array"===e.constructor.name&&Array.prototype.push.apply(this.data,e)}},{key:"remove",value:function(e){for(var t=0,a=this.data.length;t<a;t++)e===this.data[t].path&&this.data.splice(t,1)}},{key:"get",value:function(e){for(var t,a=0,n=this.data.length;a<n;a++)if(t=this.data[a],e===t.path)return t}},{key:"find",value:function(e){for(var t,a=0,n=this.data.length;a<n;a++)if(t=this.data[a],this.isPath(t.path,e))return t}},{key:"filter",value:function(e){for(var t,a=[],n=0,r=this.data.length;n<r;n++)t=this.data[n],this.isPath(t.path,e)&&a.push(t);return a}},{key:"isPath",value:function(e,a){return("/"!==e.slice(0,1)&&(e=t.resolve(e)),!!a)&&("String"===a.constructor.name?new RegExp("^"+e.replace(/{\*}/g,"(?:.*)").replace(/{(\w+)}/g,"([^/]+)")+"(/)?$").test(a||"/"):"RegExp"===a.constructor.name?a.test(e):void 0)}},{key:"toParameterObject",value:function(e,t){var a={};if(!e||!t||"/"===e||"/"===t)return a;for(var n=/{|}/g,r=/{(\w+)}/,o=t.split("/"),s=e.split("/"),d=0,i=s.length;d<i;d++)if(r.test(s[d])){var l=s[d].replace(n,"");a[l]=o[d]}return a}},{key:"toQueryString",value:function(e){var t="?";for(var a in e){var n=e[a];t+=a+"="+n+"&"}return"&"===t.slice(-1)&&(t=t.slice(0,-1)),t}},{key:"toQueryObject",value:function(e){var t={};0===e.indexOf("?")&&(e=e.slice(1));for(var a,n=e.split("&"),r=0,o=n.length;r<o;r++)a=n[r].split("="),a[0]&&a[1]&&(t[a[0]]=a[1]);return t}},{key:"toLocationObject",value:function(){return{port:window.location.port||"",host:window.location.host||"",hash:window.location.hash||"",href:window.location.href||"",origin:window.location.origin||"",search:window.location.search||"",pathname:window.location.pathname||"",hostname:window.location.hostname||"",protocol:window.location.protocol||"",username:window.location.username||"",password:window.location.password||""}}},{key:"render",value:function(e){f.utility.ready(function(){if(this.emit("routing"),e.title&&(document.title=e.title),e.description&&f.utility.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"description\"]",attributes:[{name:"name",value:"description"},{name:"content",value:e.description}]}),e.keywords&&f.utility.ensureElement({name:"meta",scope:document.head,position:"afterbegin",query:"[name=\"keywords\"]",attributes:[{name:"name",value:"keywords"},{name:"content",value:e.keywords}]}),!this.element&&(this.element=this.element||"o-router","string"==typeof this.element&&(this.element=document.body.querySelector(this.element)),!this.element))throw new Error("Oxe.router - missing o-router element");if(!e.element)if(e.load&&f.loader.load(e.load),!e.component)throw new Error("Oxe.router - missing route component");else"String"===e.component.constructor.name?e.element=document.createElement(e.component):"Object"===e.component.constructor.name&&(f.component.define(e.component),e.element=this.compiled?this.element.firstChild:document.createElement(e.component.name));if(!this.compiled){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(e.element)}this.scroll(0,0),this.emit("routed")}.bind(this))}},{key:"route",value:function(e,t){var a;return t=t||{},t.query&&(e+=this.toQueryString(t.query)),this.compiled||window.history[t.replace?"replaceState":"pushState"]({path:e},"",e),this.location=this.toLocationObject(),this.location.route=this.find(this.location.pathname),this.location.title=this.location.route.title||"",this.location.query=this.toQueryObject(this.location.search),this.location.parameters=this.toParameterObject(this.location.route.path,this.location.pathname),this.auth&&(!0===this.location.route.auth||void 0===this.location.route.auth)&&!1===f.keeper.route(this.location.route)?void 0:this.location.route.handler?a.handler(this.location.route):this.location.route.redirect?redirect(this.location.route.redirect):void this.render(this.location.route)}},{key:"stateListener",value:function(t){var e=t&&t.state?t.state.path:window.location.href;this.route(e,{replace:!0})}},{key:"clickListener",value:function(t){var e=t.path?t.path[0]:t.target,a=e.parentNode;if(this.contain){for(;a&&"O-ROUTER"!==a.nodeName;)a=a.parentNode;if("O-ROUTER"!==a.nodeName)return}if(!(t.metaKey||t.ctrlKey||t.shiftKey)){for(;e&&"A"!==e.nodeName;)e=e.parentNode;!e||"A"!==e.nodeName||e.hasAttribute("download")||e.hasAttribute("external")||e.hasAttribute("o-external")||0===e.href.indexOf("tel:")||0===e.href.indexOf("ftp:")||0===e.href.indexOf("file:")||0===e.href.indexOf("mailto:")||0!==e.href.indexOf(window.location.origin)||this.external&&("RegExp"===this.external.constructor.name&&this.external.test(e.href)||"Function"===this.external.constructor.name&&this.external(e.href)||"String"===this.external.constructor.name&&this.external===e.href)||(this.location.href!==e.href&&this.route(e.href),!this.compiled&&t.preventDefault())}}}]),a}(r),s={_innerHandler:function(e,t,a){return"\\"===a[t-1]?void 0:"'"===e?"\\'":"\""===e?"\\\"":"\t"===e?"\\t":"\n"===e?"\\n":void 0},_updateString:function(e,t,a){return a.slice(0,t)+e+a.slice(t+1)},_updateIndex:function(e,t){return t+e.length-1},template:function(e){var t=e.indexOf("`"),a=e.indexOf("`",t+1);if(-1===t||-1===a)return e;for(var n,r,o=0,l=0,i=e,s=!1,d=0;d<i.length;d++)r=i[d],"`"===r&&"\\"!==i[d-1]?s?(o++,n="'",s=!1,i=this._updateString(n,d,i),d=this._updateIndex(n,d)):(l++,n="'",s=!0,i=this._updateString(n,d,i),d=this._updateIndex(n,d)):s&&(n=this._innerHandler(r,d,i))&&(i=this._updateString(n,d,i),d=this._updateIndex(n,d));if(i=i.replace(/\${(.*?)}/g,"'+$1+'"),l==o)return i;throw new Error("Oxe - Transformer missing backtick")},patterns:{exps:/export\s+(?:default|var|let|const)?\s+/g,imps:/import(?:\s+(?:\*\s+as\s+)?\w+\s+from)?\s+(?:'|").*?(?:'|")/g,imp:/import(?:\s+(?:\*\s+as\s+)?(\w+)\s+from)?\s+(?:'|")(.*?)(?:'|")/},getImports:function(e,a){for(var n,r=[],o=e.match(this.patterns.imps)||[],s=0,i=o.length;s<i;s++)n=o[s].match(this.patterns.imp),r[s]={raw:n[0],name:n[1],url:t.resolve(n[2],a),extension:t.extension(n[2])},r[s].extension||(r[s].url+=".js");return r},getExports:function(e){for(var t,a=[],n=e.match(this.patterns.exps)||[],r=0,o=n.length;r<o;r++)t=n[r],a[r]={raw:t,default:-1!==t.indexOf("default")};return a},replaceImports:function(e,t){if(!t.length)return e;for(var a=0,n=t.length;a<n;a++){var r=t[a],o=(r.name?"var "+r.name+" = ":"")+"$LOADER.data['"+r.url+"'].result";e=e.replace(r.raw,o)}return e},replaceExports:function(e,t){if(!t.length)return e;if(1===t.length)return e.replace(t[0].raw,"return ");var a,n;for(e="var $EXPORT = {};\n"+e,e+="\nreturn $EXPORT;\n",(a=0,n=t.length);a<n;a++)e=e.replace(t[a].raw,"$EXPORT.");return e},ast:function(e){var t={};return t.url=e.url,t.raw=e.text,t.cooked=e.text,t.base=t.url.slice(0,t.url.lastIndexOf("/")+1),t.imports=this.getImports(t.raw,t.base),t.exports=this.getExports(t.raw),t.cooked=this.replaceImports(t.cooked,t.imports),t.cooked=this.replaceExports(t.cooked,t.exports),t}},d=function(e){function a(){_classCallCheck(this,a);var e=_possibleConstructorReturn(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return e.data={},e.ran=!1,e.methods={},e.transformers={},document.addEventListener("load",e.listener.bind(e),!0),e}return _inherits(a,e),_createClass(a,[{key:"setup",value:function(e){if(e=e||{},this.methods=e.methods||this.methods,this.transformers=e.transformers||this.transformers,e.loads)for(var t;t=e.loads.shift();)this.load(t)}},{key:"execute",value:function(e){var t="'use strict';\n\n"+(e.ast?e.ast.cooked:e.text),a=new Function("$LOADER","window",t);e.result=a(this,window)}},{key:"ready",value:function(e){if(e&&e.listener&&e.listener.length)for(var t;t=e.listener.shift();)t(e)}},{key:"fetch",value:function(e){var t=this,a=new XMLHttpRequest;a.onreadystatechange=function(){if(4===a.readyState)if(200<=a.status&&300>a.status||304==a.status)e.text=a.responseText,"js"===e.extension?e.transformer?t.transform(e,function(){t.execute(e),t.ready(e)}):(t.execute(e),t.ready(e)):t.ready(e);else throw new Error(a.responseText)},a.open("GET",e.url),a.send()}},{key:"transform",value:function(e,t){if(("es"===e.transformer||"est"===e.transformer)&&(e.text=s.template(e.text)),("es"===e.transformer||"esm"===e.transformer)&&(e.ast=s.ast(e)),e.ast&&e.ast.imports.length)for(var a=0,n=e.ast.imports.length,r=function(){a++,a===n&&t()},o=0;o<n;o++)this.load({listener:r,method:e.method,url:e.ast.imports[o].url,transformer:e.transformer});else t()}},{key:"attach",value:function(e){var t=document.createElement(e.tag);for(var a in e.attributes["o-load"]="true",e.attributes)t.setAttribute(a,e.attributes[a]);document.head.appendChild(t)}},{key:"js",value:function(e){"fetch"===e.method||"es"===e.transformer||"est"===e.transformer||"esm"===e.transformer?this.fetch(e):"script"===e.method?this.attach({tag:"script",attributes:{type:"text/javascript",src:e.url,async:"true"}}):this.attach({tag:"script",attributes:{type:"module",src:e.url,async:"true"}})}},{key:"css",value:function(e){"fetch"===e.method?this.fetch(e):this.attach({tag:"link",attributes:{href:e.url,type:"text/css",rel:"stylesheet"}})}},{key:"load",value:function(e,a){if("string"==typeof e?e={url:e}:a=e.listener,e.url=t.resolve(e.url),e.url in this.data){var n=this.data[e.url];return void(n.listener.length?a&&n.listener.push(a):(a&&n.listener.push(a),this.ready(n)))}this.data[e.url]=e,e.extension=e.extension||t.extension(e.url),e.listener=a?[a]:[],e.method=e.method||this.methods[e.extension],e.transformer=e.transformer||this.transformers[e.extension],"js"===e.extension?this.js(e):"css"===e.extension?this.css(e):this.fetch(e)}},{key:"listener",value:function(a){var e=a.target;if(1===e.nodeType&&e.hasAttribute("o-load")){var n=t.resolve(e.src||e.href),r=this.data[n];this.ready(r)}}}]),a}(r),u={alt:function(e){e.element.alt=""},each:function(e){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)},href:function(e){e.element.href=""},class:function(e){var t=e.names.slice(1).join("-");e.element.classList.remove(t)},html:function(e){for(var t;t=e.element.lastElementChild;)e.element.removeChild(t)},on:function(e){e.element.removeEventListener(e.names[1],e.cache,!1)},css:function(e){e.element.style.cssText=""},required:function(e){e.element.required=!1},src:function(e){e.element.src=""},text:function(e){e.element.innerText=""},value:function(e){var t,a,n,r,o;if("SELECT"===e.element.nodeName)for(o=e.element.options,t=0,a=o.length;t<a;t++)r=o[t],r.selected=!1;else if("radio"===e.element.type)for(n="input[type=\"radio\"][o-value=\""+e.path+"\"]",o=e.element.parentNode.querySelectorAll(n),(t=0,a=o.length);t<a;t++)r=o[t],r.checked=0===t;else"checkbox"===e.element.type?(e.element.checked=!1,e.element.value=!1):e.element.value=""},default:function(){}},c={required:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.required===t||(t=f.utility.binderModifyData(e,t),f.batcher.write(function(){e.element.required=t}))})},disable:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.disabled===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.disabled=t}))})},enable:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.disabled===!t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.disabled=!t}))})},hide:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.hidden===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.hidden=t}))})},show:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.hidden===!t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.hidden=!t}))})},read:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.readOnly===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.readOnly=t}))})},write:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.readOnly===!t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.readOnly=!t}))})},html:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.innerHTML===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.innerHTML=t}))})},class:function(e){f.batcher.write(function(){var t=f.model.get(e.keys),a=e.names.slice(1).join("-");t=f.binder.modifyData(e,t),e.element.classList.toggle(a,t)})},on:function(e){f.batcher.write(function(){var t=f.utility.getByPath(f.methods.data,e.scope+"."+e.path);t&&"function"==typeof t&&(e.cache?e.element.removeEventListener(e.names[1],e.cache):e.cache=t.bind(e.container),e.element.addEventListener(e.names[1],e.cache))})},css:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element.style.cssText===t||(1<e.names.length&&(t=e.names.slice(1).join("-")+": "+t+";"),t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.style.cssText=t}))})},text:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);t=void 0===t||null===t?"":t,t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))?t=JSON.stringify(t):t&&"string"!=typeof t&&(t+=""),t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element.innerText=t})})},each:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))&&e.element.children.lengthength!==t.length&&(t=f.binder.modifyData(e,t),f.batcher.write(function(){for(;e.element.children.length!==t.length;)if(e.element.children.length>t.length)e.element.removeChild(e.element.children[e.element.children.length-1]);else if(e.element.children.length<t.length){var a=e.cache.cloneNode(!0);f.utility.replaceEachVariable(a,e.names[1],e.path,e.element.children.length),f.binder.bind(a,e.container),e.element.appendChild(a)}}))})},value:function(e){f.batcher.read(function(){var t,a,n,r,o,l,i,s,d=e.element.type,u=e.element.nodeName;if(e.setup){if(e.setup=!1,l=f.model.get(e.keys),"SELECT"===u){for(s=e.element.options,n=e.element.multiple,l=void 0===l?n?[]:"":l,(r=0,o=s.length);r<o;r++)if(!s[r].disabled)if(!s[r].selected)r!==o-1||n||(l=s[0].value||s[0].innerText||"");else if(n)l.push(s[r].value||s[r].innerText||"");else{l=s[r].value||s[r].innerText||"";break}}else if("radio"===d)for(l=void 0===l?0:l,a="input[type=\"radio\"][o-value=\""+e.value+"\"]",s=e.container.querySelectorAll(a),(r=0,o=s.length);r<o;r++)i=s[r],i.checked=r===l;else if("file"===d)for(l=void 0===l?[]:l,r=0,o=l.length;r<o;r++)e.element.files[r]=l[r];else"checkbox"===d?(t="checked",l=void 0!==l&&l):(t="value",l=void 0===l?"":l);t&&(e.element[t]=f.binder.modifyData(e,l))}else if("SELECT"===u){for(n=e.element.multiple,s=e.element.options,l=n?[]:"",(r=0,o=s.length);r<o;r++)if(i=s[r],i.selected)if(n)l.push(i.value||i.innerText);else{l=i.value||i.innerText;break}}else if("radio"===d)for(a="input[type=\"radio\"][o-value=\""+e.value+"\"]",s=e.container.querySelectorAll(a),(r=0,o=s.length);r<o;r++)i=s[r],e.element===i?(l=r,i.checked=!0):i.checked=!1;else if("file"===d)for(l=l||[],r=0,o=e.element.files.length;r<o;r++)l[r]=e.element.files[r];else l="checkbox"===d?e.element.checked:e.element.value;void 0!==l&&f.model.set(e.keys,l)})},default:function(e){f.batcher.read(function(){var t=f.model.get(e.keys);e.element[e.type]===t||(t=f.binder.modifyData(e,t),f.batcher.write(function(){e.element[e.type]=t}))})}},p=function(){function e(){_classCallCheck(this,e),this.data={},this.values=[]}return _createClass(e,[{key:"set",value:function(e){if(e=e||{},!e.name)throw new Error("Oxe.render.create - missing name");if(!e.value)throw new Error("Oxe.render.create - missing value");if(!e.element)throw new Error("Oxe.render.create - missing element");if(!e.container)throw new Error("Oxe.render.create - missing container");return e.scope=e.scope||e.container.getAttribute("o-scope"),e.path=e.path||f.utility.binderPath(e.value),e.type=e.type||f.utility.binderType(e.name),e.names=e.names||f.utility.binderNames(e.name),e.values=e.values||f.utility.binderValues(e.value),e.modifiers=e.modifiers||f.utility.binderModifiers(e.value),e.keys=e.keys||[e.scope].concat(e.values),("o-value"===e.name||"data-o-value"===e.name)&&(e.setup=!0),(0===e.name.indexOf("o-each")||0===e.name.indexOf("data-o-each"))&&(e.cache=e.element.removeChild(e.element.firstElementChild)),e}},{key:"get",value:function(e){var t;if("o-value"===e.name)t=this.values;else{if(!(e.scope in this.data))return null;if(!(e.path in this.data[e.scope]))return null;t=this.data[e.scope][e.path]}var a,n=!0,r=!1;try{for(var o,l,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)if(l=o.value,l.element===e.element&&l.name===e.name)return l}catch(e){r=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}return null}},{key:"add",value:function(e){var t;"o-value"===e.name?t=this.values:(!(e.scope in this.data)&&(this.data[e.scope]={}),!(e.path in this.data[e.scope])&&(this.data[e.scope][e.path]=[]),t=this.data[e.scope][e.path]),t.push(e)}},{key:"remove",value:function(e){var t;if("o-value"===e.name)t=this.values;else{if(!(e.scope in this.data))return;if(!(e.path in this.data[e.scope]))return;t=this.data[e.scope][e.path]}for(var a=0,n=t.length;a<n;a++)if(t[a].element===e.element)return t.splice(a,1)}},{key:"each",value:function(e,t,a){var n,r,o,l,i,s=this.data[e];if(!t)for(o in s)for(i=s[o],n=0,r=i.length;n<r;n++)l=i[n],a(l,n,i,s,o);else for(o in s)if(0===o.indexOf(t)&&(o===t||"."===o.slice(t.length).charAt(0)))for(i=s[o],n=0,r=i.length;n<r;n++)l=i[n],a(l,n,i,s,o)}},{key:"unrender",value:function(e){e.type in u?u[e.type](e):u.default(e)}},{key:"render",value:function(e){e.type in c?c[e.type](e):c.default(e)}},{key:"modifyData",value:function(e,t){if(!e.modifiers.length)return t;if(!f.methods.data[e.scope])return t;var a,n=!0,r=!1;try{for(var o,l=e.modifiers[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var i=o.value,s=f.methods.data[e.scope];s&&(t=s[i].call(e.container,t))}}catch(e){r=!0,a=e}finally{try{!n&&l.return&&l.return()}finally{if(r)throw a}}return t}},{key:"skipChildren",value:function(e){if("STYLE"===e.nodeName&&"SCRIPT"===e.nodeName&&"OBJECT"===e.nodeName&&"IFRAME"===e.nodeName)return!0;var t,a=!0,n=!1;try{for(var r,o,l=e.attributes[Symbol.iterator]();!(a=(r=l.next()).done);a=!0)if(o=r.value,0===o.name.indexOf("o-each")||0===o.name.indexOf("data-o-each"))return!0}catch(e){n=!0,t=e}finally{try{!a&&l.return&&l.return()}finally{if(n)throw t}}return!1}},{key:"eachElement",value:function(e,t,a){if("O-ROUTER"===e.nodeName||e.hasAttribute("o-scope")||e.hasAttribute("o-setup")||e.hasAttribute("o-router")||e.hasAttribute("o-compiled")||e.hasAttribute("o-external")||e.hasAttribute("data-o-scope")||e.hasAttribute("data-o-setup")||e.hasAttribute("data-o-router")||e.hasAttribute("data-o-compiled")||e.hasAttribute("data-o-external")||a.call(this,e),!1===this.skipChildren(e)){var n,r=!0,o=!1;try{for(var l,i,s=e.children[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)i=l.value,this.eachElement(i,t,a)}catch(e){o=!0,n=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw n}}}}},{key:"eachAttribute",value:function(e,t){var a,n=!0,r=!1;try{for(var o,l,i=e.attributes[Symbol.iterator]();!(n=(o=i.next()).done);n=!0)l=o.value,(l&&l.value&&0===l.name.indexOf("o-")||0===l.name.indexOf("data-o-"))&&t.call(this,l)}catch(e){r=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}}},{key:"unbind",value:function(e,t){t=t||e,this.eachElement(e,t,function(e){this.eachAttribute(e,function(a){var n=this.get({element:e,container:t,name:a.name,value:a.value,scope:t.getAttribute("o-scope"),path:f.utility.binderPath(a.value)});this.remove(n),this.unrender(n)})})}},{key:"bind",value:function(e,t){t=t||e,this.eachElement(e,t,function(e){this.eachAttribute(e,function(a){var n=this.set({element:e,container:t,name:a.name,value:a.value});this.add(n),this.render(n)})})}}]),e}(),m=function(){function e(t){_classCallCheck(this,e),this._={},this._.token,this.scheme="Bearer",this.type="sessionStorage",Object.defineProperties(this,{token:{enumerable:!0,get:function(){return this._.token=this._.token||window[this.type].getItem("token")}},user:{enumerable:!0,get:function(){return this._.user=this._.user||JSON.parse(window[this.type].getItem("user"))}}}),this.setup(t)}return _createClass(e,[{key:"setup",value:function(e){e=e||{},this._.forbidden=e.forbidden||this._.forbidden,this._.unauthorized=e.unauthorized||this._.unauthorized,this._.authenticated=e.authenticated||this._.authenticated,this._.unauthenticated=e.unauthenticated||this._.unauthenticated,e.type&&(this.type=e.type+"Storage"),e.scheme&&(this.scheme=e.scheme.slice(0,1).toUpperCase()+e.scheme.slice(1))}},{key:"setToken",value:function(e){e&&("Basic"===this.scheme&&(e=this.encode(e)),this._.token=window[this.type].setItem("token",e))}},{key:"setUser",value:function(e){e&&(e=JSON.stringify(e),this._.user=window[this.type].setItem("user",e))}},{key:"removeToken",value:function(){this._.token=null,window[this.type].removeItem("token")}},{key:"removeUser",value:function(){this._.user=null,window[this.type].removeItem("user")}},{key:"authenticate",value:function(e,t){this.setToken(e),this.setUser(t),"string"==typeof this._.authenticated?f.router.route(this._.authenticated):"function"==typeof this._.authenticated&&this._.authenticated()}},{key:"unauthenticate",value:function(){this.removeToken(),this.removeUser(),"string"==typeof this._.unauthenticated?f.router.route(this._.unauthenticated):"function"==typeof this._.unauthenticated&&this._.unauthenticated()}},{key:"forbidden",value:function(e){return"string"==typeof this._.forbidden?f.router.route(this._.forbidden):"function"==typeof this._.forbidden&&this._.forbidden(e),!1}},{key:"unauthorized",value:function(e){return"string"==typeof this._.unauthorized?f.router.route(this._.unauthorized):"function"==typeof this._.unauthorized&&this._.unauthorized(e),!1}},{key:"route",value:function(e){return!1===e.auth||!!this.token||this.unauthorized(e)}},{key:"request",value:function(e){return!1===e.opt.auth||(this.token?(e.xhr.setRequestHeader("Authorization",this.scheme+" "+this.token),!0):this.unauthorized(e))}},{key:"response",value:function(e){return 401===e.statusCode?this.unauthorized(e):403!==e.statusCode||this.forbidden(e)}},{key:"encode",value:function(e){return window.btoa(e)}},{key:"decode",value:function(e){return window.atob(e)}}]),e}(),h={splice:function(){var e=arguments[0],t=arguments[1],a=2<arguments.length?arguments.length-2:0;if(!this.length||"number"!=typeof e||"number"!=typeof t)return[];0>e?(e=this.length+e,e=0<e?e:0):e=e<this.length?e:this.length,0>t?t=0:t>this.length-e&&(t=this.length-e);var n,r,o,l,i=this.$meta.length,s=2,d=arguments.length-s,u=this.slice(e,t);if(l=i-1-e,0<l)for(r=e;l--;)n=r++,o=d&&s<d?arguments[s++]:this.$meta[r],this.$meta[n]=h.create(o,this.$meta.listener,this.$meta.path+n),this.$meta.listener(this.$meta[n],this.$meta.path+n,n);if(0<a)for(;a--;)n=this.length,this.$meta[n]=h.create(arguments[s++],this.$meta.listener,this.$meta.path+n),h.defineProperty(this,n),this.$meta.listener(this.length,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(this.$meta[n],this.$meta.path+n,n);if(0<t)for(;t--;)this.$meta.length--,this.length--,n=this.length,this.$meta.listener(n,this.$meta.path.slice(0,-1),"length"),this.$meta.listener(void 0,this.$meta.path+n,n);return u},arrayProperties:function(){var e=this;return{push:{value:function(){if(!arguments.length)return this.length;for(var t=0,a=arguments.length;t<a;t++)e.splice.call(this,this.length,0,arguments[t]);return this.length}},unshift:{value:function(){if(!arguments.length)return this.length;for(var t=0,a=arguments.length;t<a;t++)e.splice.call(this,0,0,arguments[t]);return this.length}},pop:{value:function(){return this.length?e.splice.call(this,this.length-1,1):void 0}},shift:{value:function(){return this.length?e.splice.call(this,0,1):void 0}},splice:{value:e.splice}}},objectProperties:function(){var e=this;return{$get:{value:function(e){return this[e]}},$set:{value:function(t,a){if(a!==this[t]){var n=e.create(a,this.$meta.listener,this.$meta.path+t);return this.$meta[t]=n,e.defineProperty(this,t),this.$meta.listener(n,this.$meta.path+t,t),n}}},$remove:{value:function(t){if(t in this){if(this.constructor===Array)return e.splice.call(this,t,1);var a=this[t];return delete this.$meta[t],delete this[t],this.$meta.listener(void 0,this.$meta.path+t,t),a}}}}},property:function(e){var t=this;return{enumerable:!0,configurable:!0,get:function(){return this.$meta[e]},set:function(a){a!==this.$meta[e]&&(this.$meta[e]=t.create(a,this.$meta.listener,this.$meta.path+e),this.$meta.listener(this[e],this.$meta.path+e,e,this))}}},defineProperty:function(e,t){return Object.defineProperty(e,t,this.property(t))},create:function(e,t,a){var n=this;if(!e||e.constructor!==Object&&e.constructor!==Array)return e;a=a?a+".":"";var r,o=e.constructor,l=e.constructor(),i=e.constructor();if(i.$meta={value:e.constructor()},i.$meta.value.path=a,i.$meta.value.listener=t,o===Array){for(r=0,length=e.length;r<length;r++)i.$meta.value[r]=n.create(e[r],t,a+r),i[r]=n.property(r);var s=n.arrayProperties();for(r in s)i[r]=s[r]}else for(r in e)i.$meta.value[r]=n.create(e[r],t,a+r),i[r]=n.property(r);var d=n.objectProperties();for(r in d)i[r]=d[r];return Object.defineProperties(l,i)}},y=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.GET=2,e.SET=3,e.REMOVE=4,e.ran=!1,e.data=h.create({},e.listener),e}return _inherits(t,e),_createClass(t,[{key:"traverse",value:function(e,t,a){"string"==typeof t&&(t=[t]);for(var n,r=this.data,o=t[t.length-1],s=0,i=t.length-1;s<i;s++){if(!(t[s]in r)){if(e===this.GET||e===this.REMOVE)return;e===this.SET&&r.$set(t[s],isNaN(t[s+1])?{}:[])}r=r[t[s]]}return e===this.SET?n=r.$set(o,a):e===this.GET?n=r[o]:e===this.REMOVE&&(n=r[o],r.$remove(o)),n}},{key:"get",value:function(e){return this.traverse(this.GET,e)}},{key:"remove",value:function(e){return this.traverse(this.REMOVE,e)}},{key:"set",value:function(e,t){return this.traverse(this.SET,e,t)}},{key:"listener",value:function(e,t){var a=t.split("."),n=a[0],r=void 0===e?"unrender":"render";t=a.slice(1).join("."),f.binder.each(n,t,function(e){f.binder[r](e)})}}]),t}(r),f={compiled:!1};Object.defineProperties(f,{window:{enumerable:!0,get:function(){return window}},document:{enumerable:!0,get:function(){return window.document}},body:{enumerable:!0,get:function(){return window.document.body}},head:{enumerable:!0,get:function(){return window.document.head}},location:{enumerable:!0,get:function(){return this.router.location}},currentScript:{enumerable:!0,get:function(){return window.document._currentScript||window.document.currentScript}},ownerDocument:{enumerable:!0,get:function(){return(window.document._currentScript||window.document.currentScript).ownerDocument}},global:{enumerable:!0,value:{}},methods:{enumerable:!0,value:{data:{}}},utility:{enumerable:!0,value:n},setup:{enumerable:!0,value:function(e){this._setup||(this._setup=!0,e=e||{},e.listener&&e.listener.before&&e.listener.before(),e.general&&this.general.setup(e.general),e.keeper&&this.keeper.setup(e.keeper),e.fetcher&&this.fetcher.setup(e.fetcher),e.loader&&this.loader.setup(e.loader),e.component&&this.component.setup(e.component),e.router&&this.router.setup(e.router),e.listener&&e.listener.after&&e.listener.after())}}}),Object.defineProperty(f,"general",{enumerable:!0,value:new a}),Object.defineProperty(f,"batcher",{enumerable:!0,value:new o}),Object.defineProperty(f,"loader",{enumerable:!0,value:new d}),Object.defineProperty(f,"binder",{enumerable:!0,value:new p}),Object.defineProperty(f,"fetcher",{enumerable:!0,value:new l}),Object.defineProperty(f,"keeper",{enumerable:!0,value:new m}),Object.defineProperty(f,"component",{enumerable:!0,value:new e}),Object.defineProperty(f,"router",{enumerable:!0,value:new i}),Object.defineProperty(f,"model",{enumerable:!0,value:new y}),document.addEventListener("reset",function(t){var e=t.target,a=e.getAttribute("o-submit")||e.getAttribute("data-o-submit");if(a)for(var n=e.querySelectorAll("[o-value]"),r=n.length;r--;)f.binder.unrender({name:"o-value",element:n[r]},"view")},!0),document.addEventListener("submit",function(t){var e=t.target,a=e.getAttribute("o-submit")||e.getAttribute("data-o-submit");if(a){t.preventDefault();var n=f.utility.getScope(e),r=n.getAttribute("o-scope")||n.getAttribute("data-o-scope"),o=f.model.data[r],l=f.utility.formData(e,o),i=f.utility.getByPath(n.methods,a),s=i.call(n,l,t);if(s&&"object"===("undefined"==typeof s?"undefined":_typeof(s))){var d=e.getAttribute("o-auth")||e.getAttribute("data-o-auth"),u=e.getAttribute("o-action")||e.getAttribute("data-o-action"),i=e.getAttribute("o-method")||e.getAttribute("data-o-method"),c=e.getAttribute("o-enctype")||e.getAttribute("data-o-enctype");s.url=s.url||u,s.method=s.method||i,s.auth=void 0===s.auth||null===s.auth?d:s.auth,s.contentType=void 0===s.contentType||null===s.contentType?c:s.contentType,f.fetcher.fetch(s)}(s&&"object"===("undefined"==typeof s?"undefined":_typeof(s))&&s.reset||e.hasAttribute("o-reset"))&&e.reset()}},!0);var b=document.createElement("style"),v=document.createTextNode("o-router, o-router > :first-child { display: block; }");b.setAttribute("type","text/css"),b.appendChild(v),document.head.appendChild(b);var g=function(){var e=document.querySelector("script[o-setup]");if(e){var t=e.getAttribute("o-setup").split(/\s*,\s*/),a=document.querySelector("meta[name=\"oxe\"]");a&&a.hasAttribute("compiled")&&(t[1]="null",t[2]="script",f.compiled=!0,f.router.compiled=!0,f.component.compiled=!0),f.loader.load({url:t[0],method:t[2],transformer:t[1]})}document.registerElement("o-router",{prototype:Object.create(HTMLElement.prototype)})};if(document.addEventListener("input",function(t){if("checkbox"!==t.target.type&&"radio"!==t.target.type&&"option"!==t.target.type&&"SELECT"!==t.target.nodeName&&t.target.hasAttribute("o-value")){var e=f.binder.get({name:"o-value",element:t.target});f.binder.render(e)}},!0),document.addEventListener("change",function(t){if(t.target.hasAttribute("o-value")){var e=f.binder.get({name:"o-value",element:t.target});f.binder.render(e)}},!0),"registerElement"in document&&"content"in document.createElement("template"))g();else{var k=document.createElement("script");k.setAttribute("type","text/javascript"),k.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/document-register-element/1.7.2/document-register-element.js"),k.addEventListener("load",function(){g(),this.removeEventListener("load",g)},!0),document.head.appendChild(k)}return f});